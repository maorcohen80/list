(this["webpackJsonptracking-list-react"]=this["webpackJsonptracking-list-react"]||[]).push([[0],{26:function(e,t,a){e.exports=a(37)},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),c=a.n(i),l=a(5),s=a(9),o=a(12),d=a(1),m=function(){return r.a.createElement("div",{className:"ui secondary pointing menu two item"},r.a.createElement(o.b,{to:"/list",activeClassName:"active",className:"item"},"Home"),r.a.createElement(o.b,{to:"/received",activeClassName:"active",className:"item"},"Recieved Items"))},u=a(7),v=a(14),p=a.n(v),E=a(22),f=["amazon","ebay","shopify","aliexpress"],h=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"ui active inverted dimmer"},r.a.createElement("div",{className:"ui text loader"},"Loading")),r.a.createElement("p",null))},y={addRecivedItem:function(e){return{type:"ADD_RECEIVED",payload:e}},addItems:function(e){return{type:"ADD_ITEMS",payload:e}},setCurrency:function(e){return{type:"SET_CURRENCY",payload:e}},setRate:function(e){return{type:"SET_RATE",payload:e}}},g=Object(l.b)((function(e){return{items:e.items,currencyIndex:e.currencyIndex,rate:e.rate}}),y)((function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(e.rate),s=Object(u.a)(l,2),o=s[0],d=s[1],m=Object(n.useState)(e.currencyIndex),v=Object(u.a)(m,2),y=v[0],g=v[1],I=Object(n.useState)(!1),b=Object(u.a)(I,2),N=b[0],D=b[1],j=Object(n.useState)(window.innerWidth),x=Object(u.a)(j,2),O=x[0],S=x[1];Object(n.useEffect)((function(){window.addEventListener("resize",(function(){return S(window.innerWidth)})),0===e.items.length&&w();var t=setInterval((function(){T()}),1e4);return function(){clearInterval(t),window.removeEventListener("resize",(function(){return S(window.innerWidth)}))}}),[]),Object(n.useEffect)((function(){g(e.currencyIndex),C()}),[e.currencyIndex]);var T=function(){var t=Object(E.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.exchangeratesapi.io/latest?base=USD&symbols=ILS");case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,d(n.rates.ILS),e.setRate(n.rates.ILS),c(!1),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("error fetchCurrencyExcahngeRate:",t.t0),c(!1),D(!0);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(E.a)(p.a.mark((function t(){var a,n,r,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){return Math.floor(4*Math.random())},a=function(e,t){var a=new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime())),n=""+(a.getMonth()+1),r=""+a.getDate(),i=a.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[r,n,i].join("-")},t.prev=2,c(!0),t.next=6,fetch("https://fakestoreapi.com/products");case 6:if(200!==(r=t.sent).status){t.next=14;break}return t.next=10,r.json();case 10:(i=t.sent).forEach((function(e){e.deliveryDate=a(new Date(2020,9,1),new Date),e.title=e.title.substring(0,50),e.store=f[n()]})),i.sort((function(e,t){var a=e.deliveryDate.slice(0,2),n=t.deliveryDate.slice(0,2),r=e.deliveryDate.slice(3,5),i=t.deliveryDate.slice(3,5);return a>n&&r===i?1:a<n&&r===i?-1:r>i?1:r<i?-1:0})),e.addItems(i);case 14:t.next=21;break;case 16:t.prev=16,t.t0=t.catch(2),console.log("error fetching products:",t.t0),c(!1),D(!0);case 21:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(){return t.apply(this,arguments)}}(),C=function(){if(1===e.currencyIndex){var t=e.items.map((function(e){if(!e.priceInILS){var t=(e.price*o).toFixed(2);e.priceInILS=parseInt(t)}return e}));e.addItems(t)}};return r.a.createElement("div",{className:"ui container",style:{marginBottom:30}},N&&r.a.createElement("div",{className:"ui mini modal active",style:{left:O<768?20:O/2-150}},r.a.createElement("div",{className:"ui red header"},"Network Failed"),r.a.createElement("div",{className:"content"},r.a.createElement("div",null,"Opps! somthing went wrong"),r.a.createElement("div",null,"Try reloading the page...")),r.a.createElement("div",{className:"actions"},r.a.createElement("div",{onClick:function(){return D(!1)},className:"ui approve purple button"},"Ok"))),r.a.createElement("h1",null,"Items"),r.a.createElement("span",{className:"ui purple label big right pointing"},"Currency"),r.a.createElement("select",{className:"ui selection dropdown",value:y,onChange:function(t){e.setCurrency(parseInt(t.target.value))}},r.a.createElement("option",{value:0},"USD"),r.a.createElement("option",{value:1},"ILS")),r.a.createElement("div",{className:"ui middle aligned divided list animated"},i?r.a.createElement(h,null):e.items.map((function(t,a){return r.a.createElement("div",{className:"item middle aligned",key:t.id},r.a.createElement("div",{className:"right floated content"},r.a.createElement("button",{className:"ui button inverted purple small",onClick:function(){return e.addRecivedItem(t)},style:{marginTop:15}},"Received")),r.a.createElement("img",{className:"ui avatar image",src:t.image,alt:"product"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},t.title),r.a.createElement("div",{className:"description"},"price: ",0===y?"".concat(t.price,"$"):"".concat(t.priceInILS),1===y&&r.a.createElement("span",null,"\u20aa")),r.a.createElement("div",{className:"description"},"delivery estimated: ",t.deliveryDate),r.a.createElement("div",{className:"description"},"store: ",t.store)))}))),r.a.createElement("div",{className:"ui divided selection list",style:{borderTopWidth:1,borderTopColor:"#e5e5e5",borderTopStyle:"solid",paddingTop:10}},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"ui purple horizontal large label"},"Total items: \xa0 ",e.items.length))))})),I=Object(l.b)((function(e){return{items:e.items,receivedItems:e.receivedItems}}))((function(e){return r.a.createElement("div",{className:"ui container"},r.a.createElement("h1",null,"shops"),r.a.createElement("div",{className:"ui row"},r.a.createElement("div",{className:"ui middle aligned divided list"},f.map((function(t,a){return r.a.createElement("div",{key:a,className:"item middle aligned",style:{height:70,paddingTop:10,paddingLeft:15}},r.a.createElement("h3",{className:"header"},t),r.a.createElement("h4",{className:"descrption floated right",style:{marginTop:5,color:"purple"}},"Total Items ordered: ",function(t){var a=[0,0,0,0];return e.items.forEach((function(e){e.store===f[t]&&(a[t]+=1)})),e.receivedItems.forEach((function(e){e.store===f[t]&&(a[t]+=1)})),a[t]}(a)))})),";")))})),b=Object(l.b)((function(e){return{items:e.items}}))((function(){var e=Object(n.useState)(0),t=Object(u.a)(e,2),a=t[0],i=t[1],c=function(){return r.a.createElement("div",{className:"ui primary pointing menu two item"},r.a.createElement("div",{onClick:function(){return i(0)},className:0===a?"active item":"item"},"Your Products"),r.a.createElement("div",{onClick:function(){return i(1)},className:1===a?"active item":"item"},"Shop List"))};return r.a.createElement("div",{className:"ui container"},r.a.createElement(c,null),0===a?r.a.createElement(g,null):r.a.createElement(I,null))})),N=a(13),D=Object(l.b)((function(e){return{receivedItems:e.receivedItems,currencyIndex:e.currencyIndex,rate:e.rate}}),{updateRecivedItems:function(e){return{type:"UPDATE_RECEIVED",payload:e}}})((function(e){Object(n.useEffect)((function(){var t=Object(N.a)(e.receivedItems);t.forEach((function(t){t.priceInILS||(t.priceInILS=(t.price*e.rate).toFixed(2))})),e.updateRecivedItems(t)}),[e.currencyIndex]);return r.a.createElement("div",{className:"ui container",style:{marginBottom:30}},r.a.createElement("h1",null,"Received Items"),r.a.createElement("div",{className:"ui middle aligned divided list"},0===e.receivedItems.length?r.a.createElement("h4",null,"No items found..."):e.receivedItems.map((function(t){return r.a.createElement("div",{className:"item middle aligned",key:t.id},r.a.createElement("img",{className:"ui avatar image",src:t.image,alt:"product"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},t.title),r.a.createElement("div",{className:"description"},"price: ",0===e.currencyIndex?"".concat(t.price,"$"):"".concat(t.priceInILS),0===e.currencyIndex?null:r.a.createElement("span",null,"\u20aa")),r.a.createElement("div",{className:"description"},"delivery estimated: ",t.deliveryDate),r.a.createElement("div",{className:"description"},"store: ",t.store)))}))),r.a.createElement("div",{className:"ui divided list",style:{borderTopWidth:1,borderTopColor:"#e5e5e5",borderTopStyle:"solid",paddingTop:10}},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"ui purple horizontal large label"},"Total items: \xa0 ",e.receivedItems.length))))})),j=function(){return r.a.createElement("div",null,r.a.createElement(o.a,null,r.a.createElement(m,null),r.a.createElement("div",{className:"ui container"},r.a.createElement(d.a,{path:"/list",component:b}),r.a.createElement(d.a,{path:"/received",component:D}))))},x=Object(s.b)({items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if("ADD_ITEMS"===t.type)return t.payload;if("ADD_RECEIVED"===t.type){var a=e.filter((function(e){return e.id!==t.payload.id}));e=a}return e},receivedItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if("ADD_RECEIVED"===t.type){var a=Object(N.a)(e);a.push(t.payload),e=a}if("UPDATE_RECEIVED"===t.type){Object(N.a)(e);e=t.payload}return e},currencyIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENCY"===t.type?t.payload:e},rate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"SET_RATE"===t.type?t.payload:e}}),O=Object(s.c)(x);c.a.render(r.a.createElement(l.a,{store:O},r.a.createElement(j,null)),document.querySelector("#root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.20f9db77.chunk.js.map